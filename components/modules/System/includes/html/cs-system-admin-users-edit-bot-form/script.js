// Generated by CoffeeScript 1.9.3

/**
 * @package    CleverStyle CMS
 * @subpackage System module
 * @category   modules
 * @author     Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright  Copyright (c) 2015, Nazar Mokrynskyi
 * @license    MIT License, see license.txt
 */

(function() {
  var L;

  L = cs.Language;

  Polymer({
    tooltip_animation: '{animation:true,delay:200}',
    L: L,
    publish: {
      user_id: -1
    },
    user_data: {},
    ready: function() {
      return $.getJSON('api/System/admin/users/' + this.user_id, (function(_this) {
        return function(data) {
          return _this.user_data = data;
        };
      })(this));
    },
    domReady: function() {
      this.workarounds(this.shadowRoot);
      return cs.observe_inserts_on(this.shadowRoot, this.workarounds);
    },
    workarounds: function(target) {
      return $(target).cs().radio_buttons_inside().cs().tooltips_inside();
    },
    status_change: function(event) {
      return this.user_data.status = $(event.target).children('input').val();
    },
    save: function() {
      return $.ajax({
        url: 'api/System/admin/users/' + this.user_id,
        type: 'patch',
        data: {
          user: this.user_data
        },
        success: function() {
          return UIkit.notify(L.changes_saved.toString(), 'success');
        }
      });
    }
  });

}).call(this);
